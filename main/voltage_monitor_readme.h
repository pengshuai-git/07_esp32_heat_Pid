/**
 * ========================================
 * ESP32C3 电压监控 (0~5V) 配置说明
 * ========================================
 * 
 * 硬件要求：
 * - ESP32C3开发板
 * - 分压电路 (用于0~5V电压检测)
 * 
 * ========================================
 * 1. 硬件连接图
 * ========================================
 * 
 *     待测电压 (0~5V)
 *           |
 *           |
 *          [R1] 10kΩ
 *           |
 *           +----------> GPIO4 (ADC1_CHANNEL_4)
 *           |
 *          [R2] 6.8kΩ
 *           |
 *          GND
 * 
 * 分压比计算：
 * Vout = Vin × R2 / (R1 + R2)
 * Vout = Vin × 6.8kΩ / (10kΩ + 6.8kΩ) = Vin × 0.405
 * 
 * 当Vin = 5V时，Vout = 5V × 0.405 ≈ 2.025V < 3.3V ✓
 * 
 * ========================================
 * 2. ADC配置
 * ========================================
 * 
 * - 分辨率：12位 (0~4095)
 * - 衰减：12dB (支持0~3.3V输入)
 * - 采样率：每2秒一次
 * - 校准：使用ESP32内置校准
 * 
 * ========================================
 * 3. 滤波算法
 * ========================================
 * 
 * A. 移动平均滤波：
 *    - 窗口大小：10个样本
 *    - 用途：去除随机噪声
 *    - 响应速度：中等
 * 
 * B. 指数滤波：
 *    - 滤波系数α = 0.1
 *    - 公式：Y(n) = α×X(n) + (1-α)×Y(n-1)
 *    - 用途：平滑输出，去除突变
 *    - 响应速度：较慢但更平滑
 * 
 * ========================================
 * 4. 电压范围和精度
 * ========================================
 * 
 * 输入范围：0V ~ 5V
 * ADC输入：0V ~ 3.3V (通过分压)
 * 理论精度：5V / 4096 ≈ 1.22mV
 * 实际精度：约5mV (考虑噪声和非线性)
 * 
 * ========================================
 * 5. 状态指示
 * ========================================
 * 
 * 🔵 高电压    ≥4.5V  (超过标准锂电池电压)
 * 🟢 电量充足  ≥4.0V  (80-100%电量)
 * 🟡 电量良好  ≥3.5V  (50-80%电量)
 * 🟠 电量偏低  ≥3.0V  (20-50%电量)
 * 🔴 电量不足  ≥1.0V  (0-20%电量)
 * ⚫ 异常低压  <1.0V  (可能断线或故障)
 * 
 * ========================================
 * 6. 串口输出格式
 * ========================================
 * 
 * ========== 电池监控 (0~5V) ==========
 * ADC原始值: 1650
 * ADC电压: 1200 mV
 * 原始电压: 2.963 V
 * 移动平均滤波: 2.961 V
 * 指数滤波: 2.958 V
 * 电池电量: 0% (基于2.958V)
 * =====================================
 * 
 * ========================================
 * 7. 使用建议
 * ========================================
 * 
 * 1. 确保分压电路精度，使用1%精度电阻
 * 2. 在ADC输入端添加100nF滤波电容
 * 3. 避免长导线，减少干扰
 * 4. 定期校准ADC参考电压
 * 5. 根据实际电池特性调整百分比计算
 * 
 * ========================================
 * 8. 故障排除
 * ========================================
 * 
 * 问题：读数不稳定
 * 解决：增加滤波窗口大小或降低α值
 * 
 * 问题：精度不够
 * 解决：检查分压电路，更换精密电阻
 * 
 * 问题：超出范围
 * 解决：检查输入电压是否真的超过5V
 * 
 */

#ifndef VOLTAGE_MONITOR_README_H
#define VOLTAGE_MONITOR_README_H

// 推荐的分压电阻值 (1%精度)
#define RECOMMENDED_R1_KOHM  10.0   // 上拉电阻 10kΩ
#define RECOMMENDED_R2_KOHM  6.8    // 下拉电阻 6.8kΩ

// 计算实际分压比
#define ACTUAL_DIVIDER_RATIO (RECOMMENDED_R2_KOHM / (RECOMMENDED_R1_KOHM + RECOMMENDED_R2_KOHM))

// 最大输入电压 (基于3.3V ADC最大输入)
#define MAX_SAFE_INPUT_VOLTAGE (3.3 / ACTUAL_DIVIDER_RATIO)

#endif // VOLTAGE_MONITOR_README_H 