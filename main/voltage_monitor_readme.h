/**
 * ========================================
 * ESP32C3 ç”µåŽ‹ç›‘æŽ§ (0~5V) é…ç½®è¯´æ˜Ž
 * ========================================
 * 
 * ç¡¬ä»¶è¦æ±‚ï¼š
 * - ESP32C3å¼€å‘æ¿
 * - åˆ†åŽ‹ç”µè·¯ (ç”¨äºŽ0~5Vç”µåŽ‹æ£€æµ‹)
 * 
 * ========================================
 * 1. ç¡¬ä»¶è¿žæŽ¥å›¾
 * ========================================
 * 
 *     å¾…æµ‹ç”µåŽ‹ (0~5V)
 *           |
 *           |
 *          [R1] 10kÎ©
 *           |
 *           +----------> GPIO4 (ADC1_CHANNEL_4)
 *           |
 *          [R2] 6.8kÎ©
 *           |
 *          GND
 * 
 * åˆ†åŽ‹æ¯”è®¡ç®—ï¼š
 * Vout = Vin Ã— R2 / (R1 + R2)
 * Vout = Vin Ã— 6.8kÎ© / (10kÎ© + 6.8kÎ©) = Vin Ã— 0.405
 * 
 * å½“Vin = 5Væ—¶ï¼ŒVout = 5V Ã— 0.405 â‰ˆ 2.025V < 3.3V âœ“
 * 
 * ========================================
 * 2. ADCé…ç½®
 * ========================================
 * 
 * - åˆ†è¾¨çŽ‡ï¼š12ä½ (0~4095)
 * - è¡°å‡ï¼š12dB (æ”¯æŒ0~3.3Vè¾“å…¥)
 * - é‡‡æ ·çŽ‡ï¼šæ¯2ç§’ä¸€æ¬¡
 * - æ ¡å‡†ï¼šä½¿ç”¨ESP32å†…ç½®æ ¡å‡†
 * 
 * ========================================
 * 3. æ»¤æ³¢ç®—æ³•
 * ========================================
 * 
 * A. ç§»åŠ¨å¹³å‡æ»¤æ³¢ï¼š
 *    - çª—å£å¤§å°ï¼š10ä¸ªæ ·æœ¬
 *    - ç”¨é€”ï¼šåŽ»é™¤éšæœºå™ªå£°
 *    - å“åº”é€Ÿåº¦ï¼šä¸­ç­‰
 * 
 * B. æŒ‡æ•°æ»¤æ³¢ï¼š
 *    - æ»¤æ³¢ç³»æ•°Î± = 0.1
 *    - å…¬å¼ï¼šY(n) = Î±Ã—X(n) + (1-Î±)Ã—Y(n-1)
 *    - ç”¨é€”ï¼šå¹³æ»‘è¾“å‡ºï¼ŒåŽ»é™¤çªå˜
 *    - å“åº”é€Ÿåº¦ï¼šè¾ƒæ…¢ä½†æ›´å¹³æ»‘
 * 
 * ========================================
 * 4. ç”µåŽ‹èŒƒå›´å’Œç²¾åº¦
 * ========================================
 * 
 * è¾“å…¥èŒƒå›´ï¼š0V ~ 5V
 * ADCè¾“å…¥ï¼š0V ~ 3.3V (é€šè¿‡åˆ†åŽ‹)
 * ç†è®ºç²¾åº¦ï¼š5V / 4096 â‰ˆ 1.22mV
 * å®žé™…ç²¾åº¦ï¼šçº¦5mV (è€ƒè™‘å™ªå£°å’Œéžçº¿æ€§)
 * 
 * ========================================
 * 5. çŠ¶æ€æŒ‡ç¤º
 * ========================================
 * 
 * ðŸ”µ é«˜ç”µåŽ‹    â‰¥4.5V  (è¶…è¿‡æ ‡å‡†é”‚ç”µæ± ç”µåŽ‹)
 * ðŸŸ¢ ç”µé‡å……è¶³  â‰¥4.0V  (80-100%ç”µé‡)
 * ðŸŸ¡ ç”µé‡è‰¯å¥½  â‰¥3.5V  (50-80%ç”µé‡)
 * ðŸŸ  ç”µé‡åä½Ž  â‰¥3.0V  (20-50%ç”µé‡)
 * ðŸ”´ ç”µé‡ä¸è¶³  â‰¥1.0V  (0-20%ç”µé‡)
 * âš« å¼‚å¸¸ä½ŽåŽ‹  <1.0V  (å¯èƒ½æ–­çº¿æˆ–æ•…éšœ)
 * 
 * ========================================
 * 6. ä¸²å£è¾“å‡ºæ ¼å¼
 * ========================================
 * 
 * ========== ç”µæ± ç›‘æŽ§ (0~5V) ==========
 * ADCåŽŸå§‹å€¼: 1650
 * ADCç”µåŽ‹: 1200 mV
 * åŽŸå§‹ç”µåŽ‹: 2.963 V
 * ç§»åŠ¨å¹³å‡æ»¤æ³¢: 2.961 V
 * æŒ‡æ•°æ»¤æ³¢: 2.958 V
 * ç”µæ± ç”µé‡: 0% (åŸºäºŽ2.958V)
 * =====================================
 * 
 * ========================================
 * 7. ä½¿ç”¨å»ºè®®
 * ========================================
 * 
 * 1. ç¡®ä¿åˆ†åŽ‹ç”µè·¯ç²¾åº¦ï¼Œä½¿ç”¨1%ç²¾åº¦ç”µé˜»
 * 2. åœ¨ADCè¾“å…¥ç«¯æ·»åŠ 100nFæ»¤æ³¢ç”µå®¹
 * 3. é¿å…é•¿å¯¼çº¿ï¼Œå‡å°‘å¹²æ‰°
 * 4. å®šæœŸæ ¡å‡†ADCå‚è€ƒç”µåŽ‹
 * 5. æ ¹æ®å®žé™…ç”µæ± ç‰¹æ€§è°ƒæ•´ç™¾åˆ†æ¯”è®¡ç®—
 * 
 * ========================================
 * 8. æ•…éšœæŽ’é™¤
 * ========================================
 * 
 * é—®é¢˜ï¼šè¯»æ•°ä¸ç¨³å®š
 * è§£å†³ï¼šå¢žåŠ æ»¤æ³¢çª—å£å¤§å°æˆ–é™ä½ŽÎ±å€¼
 * 
 * é—®é¢˜ï¼šç²¾åº¦ä¸å¤Ÿ
 * è§£å†³ï¼šæ£€æŸ¥åˆ†åŽ‹ç”µè·¯ï¼Œæ›´æ¢ç²¾å¯†ç”µé˜»
 * 
 * é—®é¢˜ï¼šè¶…å‡ºèŒƒå›´
 * è§£å†³ï¼šæ£€æŸ¥è¾“å…¥ç”µåŽ‹æ˜¯å¦çœŸçš„è¶…è¿‡5V
 * 
 */

#ifndef VOLTAGE_MONITOR_README_H
#define VOLTAGE_MONITOR_README_H

// æŽ¨èçš„åˆ†åŽ‹ç”µé˜»å€¼ (1%ç²¾åº¦)
#define RECOMMENDED_R1_KOHM  10.0   // ä¸Šæ‹‰ç”µé˜» 10kÎ©
#define RECOMMENDED_R2_KOHM  6.8    // ä¸‹æ‹‰ç”µé˜» 6.8kÎ©

// è®¡ç®—å®žé™…åˆ†åŽ‹æ¯”
#define ACTUAL_DIVIDER_RATIO (RECOMMENDED_R2_KOHM / (RECOMMENDED_R1_KOHM + RECOMMENDED_R2_KOHM))

// æœ€å¤§è¾“å…¥ç”µåŽ‹ (åŸºäºŽ3.3V ADCæœ€å¤§è¾“å…¥)
#define MAX_SAFE_INPUT_VOLTAGE (3.3 / ACTUAL_DIVIDER_RATIO)

#endif // VOLTAGE_MONITOR_README_H 